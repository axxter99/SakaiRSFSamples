<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<!-- The "request scope application context" file  -->

<beans>
  <bean id="dataBean"
    class="uk.ac.cam.caret.sakai.rsf.beans.DataBean" />


  <bean id="brokenTransitSeed"
    class="uk.org.ponder.dateutil.BrokenDateTransit" singleton="false">
    <property name="mode" value="Full" />
  </bean>

  <bean id="brokenDateTransit" parent="beanExploder">
    <property name="beanName" value="brokenTransitSeed"/>
  </bean>

  
  <bean id="fieldTransitSeed"
    class="uk.org.ponder.dateutil.FieldDateTransit" singleton="false">
    <property name="locale" ref="sakai-Locale"/>
  </bean>
  
  <bean id="fieldDateTransit" parent="beanExploder">
    <property name="beanName" value="fieldTransitSeed"/>
  </bean>

  
  <bean name="monthBean" class="uk.org.ponder.dateutil.MonthBean" init-method="init">
    <property name="locale" ref="sakai-Locale"/>
  </bean>
  
  <bean id="componentChoice" class="uk.ac.cam.caret.sakai.rsf.beans.ComponentChoiceBean">
    <property name="dateEvolvers" ref="dateEvolvers"/>
    <property name="textEvolvers" ref="textEvolvers"/>
    <property name="sessionManager" ref="org.sakaiproject.tool.api.SessionManager" />
  </bean>
  
  <bean id="textEvolver" factory-bean="componentChoice" factory-method="getTextInputEvolver"/>
  
  <bean id="dateEvolver" factory-bean="componentChoice" factory-method="getDateInputEvolver"/>
  
  
  <bean class="uk.ac.cam.caret.sakai.rsf.producers.IndexProducer">
  <!-- This would not be injected with OTP -->
    <property name="dataBean" ref="dataBean"/>
    <property name="choiceBean" ref="componentChoice"/>
    <property name="dateEvolver" ref="dateEvolver"/>
    <property name="textEvolver" ref="textEvolver"/>
    <property name="locale" ref="sakai-Locale"/> 
  </bean>
  

  <bean class="uk.ac.cam.caret.sakai.rsf.producers.ResultsProducer">
    <property name="localeGetter" ref="sakai-LocaleProxy"/>
    <property name="dataBean" ref="dataBean"/>
  </bean>
  
</beans>